<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ADHD Living</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš”</text></svg>">
</head>
<body>

<main class="app" id="app">

    <!-- ========== NOW VIEW ========== -->
    <section class="view active" id="view-now">
        <div class="now-header">
            <div>
                <h1 class="greeting-text" id="greeting-text">Good evening</h1>
                <p class="greeting-name" id="greeting-name">Wanderer</p>
            </div>
            <button class="icon-btn" id="open-settings" aria-label="Settings">âš™ï¸</button>
        </div>

        <div class="energy-selector">
            <p class="prompt-text">How's your energy?</p>
            <div class="energy-options" id="energy-options">
                <button class="energy-opt" data-energy="green">
                    <span class="energy-emoji">âš¡</span><span>Good</span>
                </button>
                <button class="energy-opt active" data-energy="yellow">
                    <span class="energy-emoji">ğŸ”‹</span><span>Okay</span>
                </button>
                <button class="energy-opt" data-energy="red">
                    <span class="energy-emoji">ğŸª«</span><span>Low</span>
                </button>
            </div>
        </div>

        <div class="next-quest" id="next-quest">
            <span class="next-quest-label">Next up</span>
            <div class="next-quest-body">
                <div class="next-quest-info">
                    <span class="next-quest-tier" id="next-quest-tier">ğŸ›¡</span>
                    <span class="next-quest-name" id="next-quest-name">No quests yet</span>
                </div>
                <button class="btn-check-big" id="complete-next-quest" aria-label="Complete">âœ“</button>
            </div>
            <p class="next-quest-hint" id="next-quest-hint">Add quests in the Quests tab</p>
        </div>

        <div class="today-stats" id="today-stats">
            <div class="stat-chip"><span class="stat-num" id="stat-done">0</span> done</div>
            <div class="stat-chip">ğŸ”¥ <span class="stat-num" id="stat-streak">0</span></div>
            <div class="stat-chip">Lv.<span class="stat-num" id="stat-level">1</span></div>
            <div class="stat-chip">ğŸª™ <span class="stat-num" id="stat-gold">50</span></div>
        </div>

        <div class="stuck-buttons">
            <button class="btn-stuck" id="btn-draw-card">ğŸ² I'm stuck</button>
            <button class="btn-stuck btn-emergency" id="btn-supervisor">ğŸ›¡ Need help</button>
        </div>

        <div class="drawn-card hidden" id="drawn-card">
            <div class="drawn-card-inner">
                <span class="drawn-card-icon" id="drawn-card-icon">ğŸ¯</span>
                <p class="drawn-card-text" id="drawn-card-text">Stand up and stretch</p>
                <div class="drawn-card-actions">
                    <button class="btn-pill btn-done" id="drawn-card-done">âœ“ Did it</button>
                    <button class="btn-pill btn-ghost" id="drawn-card-redraw">â†» Another</button>
                    <button class="btn-pill btn-ghost" id="drawn-card-dismiss">âœ•</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ========== QUESTS VIEW ========== -->
    <section class="view" id="view-quests">
        <div class="view-header">
            <h1>Quests</h1>
            <button class="btn-circle" id="add-quest-btn" aria-label="Add quest">+</button>
        </div>

        <div class="sub-tabs" id="quest-tabs">
            <button class="sub-tab active" data-qtab="today">Today</button>
            <button class="sub-tab" data-qtab="habits">Habits</button>
            <button class="sub-tab" data-qtab="weekly">This Week</button>
        </div>

        <div class="quest-panel active" id="panel-today">
            <div id="quest-list-today" class="quest-list"></div>
            <p class="empty-msg" id="empty-today">No quests for today.<br>Tap + to add one.</p>
        </div>

        <div class="quest-panel" id="panel-habits">
            <div id="habit-list" class="quest-list"></div>
            <p class="empty-msg" id="empty-habits">No habits yet.<br>Tap + to create one.</p>
        </div>

        <div class="quest-panel" id="panel-weekly">
            <p class="week-label" id="week-label"></p>
            <h3 class="section-title">Main Goals</h3>
            <div id="weekly-main-list" class="quest-list"></div>
            <h3 class="section-title">Bonus Goals</h3>
            <div id="weekly-side-list" class="quest-list"></div>
            <p class="empty-msg" id="empty-weekly">Plan your week.<br>Tap + to add goals.</p>
        </div>
    </section>

    <!-- ========== LOG VIEW ========== -->
    <section class="view" id="view-log">
        <div class="view-header">
            <h1>Log</h1>
            <span class="today-label" id="log-date"></span>
        </div>

        <div class="log-grid" id="log-grid">
            <button class="log-btn" data-log="mood">
                <span class="log-btn-icon">ğŸ˜Š</span>
                <span class="log-btn-label">Mood</span>
                <span class="log-btn-check hidden" id="log-check-mood">âœ“</span>
            </button>
            <button class="log-btn" data-log="sleep">
                <span class="log-btn-icon">ğŸ˜´</span>
                <span class="log-btn-label">Sleep</span>
                <span class="log-btn-check hidden" id="log-check-sleep">âœ“</span>
            </button>
            <button class="log-btn" data-log="food">
                <span class="log-btn-icon">ğŸ½</span>
                <span class="log-btn-label">Food</span>
                <span class="log-btn-check hidden" id="log-check-food">âœ“</span>
            </button>
            <button class="log-btn" data-log="meds">
                <span class="log-btn-icon">ğŸ’Š</span>
                <span class="log-btn-label">Meds</span>
                <span class="log-btn-check hidden" id="log-check-meds">âœ“</span>
            </button>
            <button class="log-btn" data-log="journal">
                <span class="log-btn-icon">ğŸ“</span>
                <span class="log-btn-label">Journal</span>
                <span class="log-btn-check hidden" id="log-check-journal">âœ“</span>
            </button>
            <button class="log-btn" data-log="body">
                <span class="log-btn-icon">ğŸ’ª</span>
                <span class="log-btn-label">Body</span>
                <span class="log-btn-check hidden" id="log-check-body">âœ“</span>
            </button>
        </div>

        <!-- Mood Panel -->
        <div class="log-form hidden" id="log-form-mood">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ˜Š Mood Check</h2>
            </div>
            <div class="mood-picker" id="mood-picker">
                <button class="mood-btn" data-mood="1">ğŸ˜«</button>
                <button class="mood-btn" data-mood="2">ğŸ˜”</button>
                <button class="mood-btn" data-mood="3">ğŸ˜</button>
                <button class="mood-btn" data-mood="4">ğŸ˜Š</button>
                <button class="mood-btn" data-mood="5">ğŸ˜„</button>
            </div>
            <textarea class="log-textarea" id="mood-notes" placeholder="What's on your mind? (optional)" rows="3"></textarea>
            <button class="btn-primary btn-full" id="save-mood">Save</button>
        </div>

        <!-- Sleep Panel -->
        <div class="log-form hidden" id="log-form-sleep">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ˜´ Sleep</h2>
            </div>
            <div class="form-row">
                <div class="form-field"><label>Bedtime</label><input type="time" id="log-bedtime"></div>
                <div class="form-field"><label>Wake up</label><input type="time" id="log-waketime"></div>
            </div>
            <label class="form-label">Quality</label>
            <div class="mood-picker" id="sleep-quality-picker">
                <button class="mood-btn" data-val="1">ğŸ˜«</button>
                <button class="mood-btn" data-val="2">ğŸ˜´</button>
                <button class="mood-btn" data-val="3">ğŸ˜</button>
                <button class="mood-btn" data-val="4">ğŸ˜Š</button>
                <button class="mood-btn" data-val="5">ğŸ˜„</button>
            </div>
            <textarea class="log-textarea" id="sleep-notes" placeholder="Notes (optional)" rows="2"></textarea>
            <button class="btn-primary btn-full" id="save-sleep">Save</button>
        </div>

        <!-- Food Panel -->
        <div class="log-form hidden" id="log-form-food">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ½ Food</h2>
            </div>
            <div id="meal-entries">
                <div class="meal-row">
                    <select class="meal-select"><option>ğŸŒ… Breakfast</option><option>â˜€ Lunch</option><option>ğŸŒ™ Dinner</option><option>ğŸ¿ Snack</option></select>
                    <input type="text" class="meal-input" placeholder="What did you eat?">
                </div>
            </div>
            <button class="btn-text" id="add-meal-row">+ Add meal</button>
            <label class="form-label">Water</label>
            <div class="water-row" id="water-row">
                <button class="water-btn" data-cup="1">ğŸ’§</button>
                <button class="water-btn" data-cup="2">ğŸ’§</button>
                <button class="water-btn" data-cup="3">ğŸ’§</button>
                <button class="water-btn" data-cup="4">ğŸ’§</button>
                <button class="water-btn" data-cup="5">ğŸ’§</button>
                <button class="water-btn" data-cup="6">ğŸ’§</button>
                <button class="water-btn" data-cup="7">ğŸ’§</button>
                <button class="water-btn" data-cup="8">ğŸ’§</button>
            </div>
            <button class="btn-primary btn-full" id="save-food">Save</button>
        </div>

        <!-- Meds Panel -->
        <div class="log-form hidden" id="log-form-meds">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ’Š Meds</h2>
            </div>
            <div id="meds-checklist" class="meds-list"></div>
            <div class="add-inline-row">
                <input type="text" id="new-med-name" placeholder="Medication name">
                <input type="text" id="new-med-time" placeholder="Time">
                <button class="btn-circle btn-sm" id="add-med-btn">+</button>
            </div>
            <button class="btn-primary btn-full" id="save-meds">Save</button>
        </div>

        <!-- Journal Panel -->
        <div class="log-form hidden" id="log-form-journal">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ“ Journal</h2>
            </div>
            <textarea class="log-textarea log-textarea-lg" id="journal-entry" placeholder="Free write. No rules. Just get it out." rows="10"></textarea>
            <button class="btn-primary btn-full" id="save-journal">Save</button>
        </div>

        <!-- Body Panel -->
        <div class="log-form hidden" id="log-form-body">
            <div class="log-form-header">
                <button class="btn-back" data-log-close>â†</button>
                <h2>ğŸ’ª Body</h2>
            </div>
            <div class="form-field"><label>Weight (kg)</label><input type="number" id="log-weight" step="0.1" placeholder="Optional"></div>
            <div class="form-field"><label>Pain / discomfort</label><input type="text" id="log-pain" placeholder="e.g., headache, back pain"></div>
            <div class="form-field"><label>Exercise</label><input type="text" id="log-exercise" placeholder="e.g., walked 20 min"></div>
            <button class="btn-primary btn-full" id="save-body">Save</button>
        </div>
    </section>

    <!-- ========== ME VIEW ========== -->
    <section class="view" id="view-me">
        <div class="me-profile">
            <div class="me-avatar" id="me-avatar">ğŸ§™</div>
            <h2 class="me-name" id="me-name">Wanderer</h2>
            <span class="me-class" id="me-class">Ranger</span>
            <div class="me-xp-bar">
                <div class="xp-track"><div class="xp-fill" id="me-xp-fill"></div></div>
                <span class="xp-label" id="me-xp-label">0 / 100 XP</span>
            </div>
            <div class="me-stats-row">
                <span class="me-stat">ğŸª™ <span id="me-gold">50</span></span>
                <span class="me-stat">â­ Lv.<span id="me-level">1</span></span>
                <span class="me-stat">ğŸ”¥ <span id="me-streak">0</span> day</span>
            </div>
        </div>

        <div class="me-menu">
            <button class="me-menu-item" data-panel="ai"><span class="mi-icon">ğŸ¤–</span><span>AI Companion</span><span class="mi-arrow">â€º</span></button>
            <button class="me-menu-item" data-panel="vault"><span class="mi-icon">ğŸ“¦</span><span>Vault</span><span class="mi-arrow">â€º</span></button>
            <button class="me-menu-item" data-panel="shop"><span class="mi-icon">ğŸª</span><span>Shop</span><span class="mi-arrow">â€º</span></button>
            <button class="me-menu-item" data-panel="achievements"><span class="mi-icon">ğŸ†</span><span>Achievements</span><span class="mi-arrow">â€º</span></button>
            <button class="me-menu-item" data-panel="history"><span class="mi-icon">ğŸ“œ</span><span>History</span><span class="mi-arrow">â€º</span></button>
            <button class="me-menu-item" data-panel="settings"><span class="mi-icon">âš™ï¸</span><span>Settings</span><span class="mi-arrow">â€º</span></button>
        </div>
    </section>

</main>

<!-- ========== BOTTOM NAV ========== -->
<nav class="bottom-nav" id="bottom-nav">
    <button class="nav-tab active" data-view="now"><span class="nav-icon">ğŸ </span><span class="nav-label">Now</span></button>
    <button class="nav-tab" data-view="quests"><span class="nav-icon">âš”ï¸</span><span class="nav-label">Quests</span></button>
    <button class="nav-tab" data-view="log"><span class="nav-icon">ğŸ“</span><span class="nav-label">Log</span></button>
    <button class="nav-tab" data-view="me"><span class="nav-icon">ğŸ‘¤</span><span class="nav-label">Me</span></button>
</nav>

<!-- ========== OVERLAYS ========== -->

<!-- Supervisor Mode -->
<div class="overlay hidden" id="supervisor-overlay">
    <div class="overlay-content">
        <div class="supervisor-brand">ğŸ›¡ Supervisor Mode</div>
        <div class="command-card" id="command-card">
            <p class="command-main" id="command-main">Stop thinking.</p>
            <p class="command-sub" id="command-sub">Stand up from your chair.</p>
        </div>
        <div class="supervisor-btns">
            <button class="btn-primary btn-lg" id="command-done-btn">âœ“ Done</button>
            <button class="btn-ghost btn-lg" id="command-skip-btn">Skip</button>
        </div>
        <button class="btn-text" id="exit-supervisor">âœ• Exit Supervisor</button>
    </div>
</div>

<!-- Add Quest/Habit/Weekly Modal -->
<div class="modal hidden" id="add-modal">
    <div class="modal-sheet">
        <div class="modal-handle"></div>
        <h2 id="add-modal-title">New Quest</h2>
        <form id="add-form">
            <div class="form-field">
                <label>What needs doing?</label>
                <input type="text" id="add-name" placeholder="e.g., Email the landlord" required autocomplete="off">
            </div>
            <div class="form-field" id="add-type-field">
                <label>Priority</label>
                <div class="type-selector" id="type-selector">
                    <button type="button" class="type-opt" data-type="boss">ğŸ‘¹ Important</button>
                    <button type="button" class="type-opt active" data-type="survival">ğŸ›¡ Essential</button>
                    <button type="button" class="type-opt" data-type="side">ğŸ“¦ Optional</button>
                </div>
            </div>
            <input type="hidden" id="add-tier" value="survival">
            <input type="hidden" id="add-mode" value="task">
            <button type="submit" class="btn-primary btn-full btn-lg">Add</button>
        </form>
    </div>
</div>

<!-- AI Chat Panel -->
<div class="panel hidden" id="ai-panel">
    <div class="panel-header">
        <button class="btn-back" id="ai-back">â†</button>
        <h2>ğŸ¤– AI Companion</h2>
    </div>
    <div class="chat-messages" id="chat-messages">
        <div class="chat-msg ai"><div class="chat-bubble">Hey, adventurer. What's going on?</div></div>
    </div>
    <div class="quick-prompts">
        <button class="qp-btn" data-prompt="status">ğŸ“Š Status</button>
        <button class="qp-btn" data-prompt="suggest">ğŸ¯ Suggest</button>
        <button class="qp-btn" data-prompt="review">ğŸ“ Review</button>
        <button class="qp-btn" data-prompt="comfort">ğŸ’† Comfort</button>
    </div>
    <div class="chat-input-row">
        <textarea id="chat-input" placeholder="Tell me what's happening..." rows="1"></textarea>
        <button class="btn-primary" id="chat-send">Send</button>
    </div>
</div>

<!-- Vault Panel -->
<div class="panel hidden" id="vault-panel">
    <div class="panel-header">
        <button class="btn-back" id="vault-back">â†</button>
        <h2>ğŸ“¦ Vault</h2>
        <button class="btn-circle btn-sm" id="add-vault-btn">+</button>
    </div>
    <div class="vault-filters">
        <button class="filter-chip active" data-filter="all">All</button>
        <button class="filter-chip" data-filter="action">ğŸ”§</button>
        <button class="filter-chip" data-filter="project">ğŸ“</button>
        <button class="filter-chip" data-filter="wishlist">â­</button>
        <button class="filter-chip" data-filter="media">ğŸ¬</button>
    </div>
    <div id="vault-list" class="item-list"></div>
</div>

<!-- Add Vault Item Modal -->
<div class="modal hidden" id="vault-modal">
    <div class="modal-sheet">
        <div class="modal-handle"></div>
        <h2>Store in Vault</h2>
        <form id="vault-form">
            <div class="form-field"><label>Item Name</label><input type="text" id="vault-name" placeholder="What to remember for later?" required></div>
            <div class="form-field">
                <label>Category</label>
                <select id="vault-category">
                    <option value="action">ğŸ”§ Action</option>
                    <option value="project">ğŸ“ Project</option>
                    <option value="wishlist">â­ Wishlist</option>
                    <option value="media">ğŸ¬ Media</option>
                </select>
            </div>
            <div class="form-field"><label>Notes</label><textarea id="vault-notes" placeholder="Details..." rows="2"></textarea></div>
            <button type="submit" class="btn-primary btn-full btn-lg">Store</button>
        </form>
    </div>
</div>

<!-- Shop Panel -->
<div class="panel hidden" id="shop-panel">
    <div class="panel-header">
        <button class="btn-back" id="shop-back">â†</button>
        <h2>ğŸª Shop</h2>
        <span class="gold-badge" id="shop-gold">ğŸª™ 50</span>
    </div>
    <div id="shop-list" class="item-list"></div>
</div>

<!-- Achievements Panel -->
<div class="panel hidden" id="achievements-panel">
    <div class="panel-header">
        <button class="btn-back" id="achievements-back">â†</button>
        <h2>ğŸ† Achievements</h2>
    </div>
    <div id="achievements-list" class="achievements-grid"></div>
</div>

<!-- History Panel -->
<div class="panel hidden" id="history-panel">
    <div class="panel-header">
        <button class="btn-back" id="history-back">â†</button>
        <h2>ğŸ“œ History</h2>
    </div>
    <div id="history-list" class="history-list"></div>
</div>

<!-- Settings Panel -->
<div class="panel hidden" id="settings-panel">
    <div class="panel-header">
        <button class="btn-back" id="settings-back">â†</button>
        <h2>âš™ Settings</h2>
    </div>
    <div class="settings-body">
        <div class="form-field"><label>Character Name</label><input type="text" id="setting-name" placeholder="Your name"></div>
        <div class="form-field">
            <label>Class</label>
            <select id="setting-class">
                <option value="ranger">ğŸ¹ Ranger</option><option value="mage">ğŸ§™ Mage</option>
                <option value="warrior">âš” Warrior</option><option value="rogue">ğŸ—¡ Rogue</option>
                <option value="healer">ğŸ’š Healer</option><option value="bard">ğŸµ Bard</option>
            </select>
        </div>
        <div class="form-field">
            <label>Theme</label>
            <div class="theme-toggle" id="theme-toggle">
                <button class="theme-opt active" data-theme="light">â˜€ Light</button>
                <button class="theme-opt" data-theme="dark">ğŸŒ™ Dark</button>
            </div>
        </div>
        <hr>
        <div class="form-field"><label>AI API Key</label><input type="password" id="setting-api-key" placeholder="sk-..."><small>Stored locally only.</small></div>
        <div class="form-field"><label>API Endpoint</label><input type="text" id="setting-api-url" placeholder="https://api.openai.com/v1/chat/completions"></div>
        <div class="form-field"><label>Model</label><input type="text" id="setting-model" placeholder="gpt-4o-mini"></div>
        <hr>
        <div class="form-field">
            <label>Transition Cards</label>
            <div id="transition-cards-edit" class="tags-list"></div>
            <div class="add-inline-row">
                <input type="text" id="new-card-name" placeholder="New card action">
                <button class="btn-circle btn-sm" id="add-card-btn" type="button">+</button>
            </div>
        </div>
        <hr>
        <div class="settings-actions">
            <button class="btn-primary" id="export-data">ğŸ“¤ Export</button>
            <button class="btn-primary" id="import-data">ğŸ“¥ Import</button>
            <input type="file" id="import-file" accept=".json" hidden>
        </div>
        <button class="btn-danger btn-full" id="reset-all">Reset All Data</button>
        <button class="btn-primary btn-full" id="save-settings">Save Settings</button>
    </div>
</div>

<!-- Toast -->
<div class="toast-container" id="toast-container"></div>

<!-- Scripts -->
<script src="js/store.js"></script>
<script src="js/app.js"></script>
<script src="js/now.js"></script>
<script src="js/quests.js"></script>
<script src="js/log.js"></script>
<script src="js/me.js"></script>
<script src="js/overlays.js"></script>

</body>
</html>
