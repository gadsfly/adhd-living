<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHD Living â€” Quest Board</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš”</text></svg>">
</head>
<body>
    <!-- Particle background -->
    <canvas id="particle-canvas"></canvas>

    <!-- Top Navigation Bar -->
    <nav class="topbar">
        <div class="topbar-left">
            <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">â˜°</button>
            <a href="#" class="brand" data-page="dashboard">âš” ADHD Living</a>
        </div>
        <div class="topbar-center">
            <!-- Status bars mini view -->
            <div class="mini-status">
                <div class="mini-bar hp" title="Physical HP">
                    <span class="mini-bar-icon">â¤</span>
                    <div class="mini-bar-track"><div class="mini-bar-fill" id="mini-hp-fill"></div></div>
                </div>
                <div class="mini-bar mp" title="Mental MP">
                    <span class="mini-bar-icon">ğŸ’</span>
                    <div class="mini-bar-track"><div class="mini-bar-fill" id="mini-mp-fill"></div></div>
                </div>
                <div class="mini-bar xp" title="Experience XP">
                    <span class="mini-bar-icon">â­</span>
                    <div class="mini-bar-track"><div class="mini-bar-fill" id="mini-xp-fill"></div></div>
                </div>
            </div>
        </div>
        <div class="topbar-right">
            <div class="gold-display" title="Gold">
                <span class="gold-icon">ğŸª™</span>
                <span class="gold-count" id="gold-count">0</span>
            </div>
            <div class="level-display" title="Level">
                <span class="level-badge" id="level-badge">Lv.1</span>
            </div>
            <button class="topbar-btn" id="lang-toggle" title="ä¸­/EN">ä¸­</button>
            <button class="topbar-btn" id="theme-toggle" title="Toggle theme">â˜€</button>
        </div>
    </nav>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-profile">
            <div class="avatar-frame">
                <div class="avatar" id="avatar">ğŸ§™</div>
            </div>
            <div class="profile-name" id="profile-name">Wanderer</div>
            <div class="profile-class" id="profile-class">Ranger</div>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="sidebar-link active" data-page="dashboard">
                <span class="sidebar-icon">ğŸ </span>
                <span class="sidebar-label">Dashboard</span>
            </a>
            <a href="#" class="sidebar-link" data-page="tasks">
                <span class="sidebar-icon">âš”ï¸</span>
                <span class="sidebar-label">Quest Board</span>
            </a>
            <a href="#" class="sidebar-link" data-page="backlog">
                <span class="sidebar-icon">ğŸ“¦</span>
                <span class="sidebar-label">Vault</span>
            </a>
            <a href="#" class="sidebar-link" data-page="weekly">
                <span class="sidebar-icon">ğŸ“œ</span>
                <span class="sidebar-label">Weekly Plan</span>
            </a>
            <a href="#" class="sidebar-link" data-page="habits">
                <span class="sidebar-icon">ğŸƒ</span>
                <span class="sidebar-label">Habit Cards</span>
            </a>
            <a href="#" class="sidebar-link" data-page="transition">
                <span class="sidebar-icon">ğŸ²</span>
                <span class="sidebar-label">Transition</span>
            </a>
            <a href="#" class="sidebar-link" data-page="supervisor">
                <span class="sidebar-icon">ğŸ›¡ï¸</span>
                <span class="sidebar-label">Supervisor</span>
            </a>
            <a href="#" class="sidebar-link" data-page="records">
                <span class="sidebar-icon">ğŸ”¥</span>
                <span class="sidebar-label">Campfire Log</span>
            </a>
            <a href="#" class="sidebar-link" data-page="shop">
                <span class="sidebar-icon">ğŸª</span>
                <span class="sidebar-label">Shop & RPG</span>
            </a>
            <a href="#" class="sidebar-link" data-page="ai">
                <span class="sidebar-icon">ğŸ¤–</span>
                <span class="sidebar-label">AI Companion</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <button class="sidebar-link" id="settings-btn">
                <span class="sidebar-icon">âš™ï¸</span>
                <span class="sidebar-label">Settings</span>
            </button>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content" id="main-content">

        <!-- ==================== DASHBOARD ==================== -->
        <section class="page active" id="page-dashboard">
            <div class="page-header">
                <h1 class="page-title">âš” Command Center</h1>
                <div class="day-status-selector">
                    <span class="day-label">Today's Energy:</span>
                    <button class="status-btn green active" data-status="green" title="Energized">ğŸŸ¢ Charged</button>
                    <button class="status-btn yellow" data-status="yellow" title="Moderate">ğŸŸ¡ Moderate</button>
                    <button class="status-btn red" data-status="red" title="Low Power">ğŸ”´ Low Power</button>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- Physical Stats (Red Bar) -->
                <div class="card stat-card physical-card">
                    <h3 class="card-title">â¤ Physical (HP)</h3>
                    <div class="stat-bars">
                        <div class="stat-row">
                            <label>Stamina</label>
                            <input type="range" class="stat-slider hp-slider" data-stat="stamina" min="0" max="100" value="70">
                            <span class="stat-value">70</span>
                        </div>
                        <div class="stat-row">
                            <label>Diet</label>
                            <input type="range" class="stat-slider hp-slider" data-stat="diet" min="0" max="100" value="50">
                            <span class="stat-value">50</span>
                        </div>
                        <div class="stat-row">
                            <label>Sleep</label>
                            <input type="range" class="stat-slider hp-slider" data-stat="sleep" min="0" max="100" value="60">
                            <span class="stat-value">60</span>
                        </div>
                    </div>
                    <div class="overall-bar hp-bar">
                        <div class="bar-track"><div class="bar-fill" id="hp-fill"></div></div>
                        <span class="bar-label" id="hp-label">60/100</span>
                    </div>
                </div>

                <!-- Mental Stats (Blue Bar) -->
                <div class="card stat-card mental-card">
                    <h3 class="card-title">ğŸ’ Mental (MP)</h3>
                    <div class="stat-bars">
                        <div class="stat-row">
                            <label>Spirit</label>
                            <input type="range" class="stat-slider mp-slider" data-stat="spirit" min="0" max="100" value="65">
                            <span class="stat-value">65</span>
                        </div>
                        <div class="stat-row">
                            <label>Focus</label>
                            <input type="range" class="stat-slider mp-slider" data-stat="focus" min="0" max="100" value="40">
                            <span class="stat-value">40</span>
                        </div>
                        <div class="stat-row">
                            <label>Mood</label>
                            <input type="range" class="stat-slider mp-slider" data-stat="mood" min="0" max="100" value="55">
                            <span class="stat-value">55</span>
                        </div>
                    </div>
                    <div class="overall-bar mp-bar">
                        <div class="bar-track"><div class="bar-fill" id="mp-fill"></div></div>
                        <span class="bar-label" id="mp-label">53/100</span>
                    </div>
                </div>

                <!-- Active Buffs/Debuffs -->
                <div class="card buff-card">
                    <h3 class="card-title">ğŸ§ª Active Effects</h3>
                    <div class="buff-grid" id="buff-grid">
                        <!-- Populated by JS -->
                    </div>
                    <div class="buff-controls">
                        <select id="buff-select" class="rpg-select">
                            <option value="">+ Add Effect...</option>
                            <optgroup label="Buffs âœ¨">
                                <option value="caffeinated" data-type="buff">â˜• Caffeinated</option>
                                <option value="well-rested" data-type="buff">ğŸ˜´ Well Rested</option>
                                <option value="motivated" data-type="buff">ğŸ”¥ Motivated</option>
                                <option value="social-boost" data-type="buff">ğŸ’¬ Social Boost</option>
                                <option value="medicated" data-type="buff">ğŸ’Š Medicated</option>
                                <option value="exercise-high" data-type="buff">ğŸƒ Exercise High</option>
                                <option value="creative-flow" data-type="buff">ğŸ¨ Creative Flow</option>
                                <option value="hyperfocus" data-type="buff">ğŸ¯ Hyperfocus</option>
                            </optgroup>
                            <optgroup label="Debuffs ğŸ’€">
                                <option value="tired" data-type="debuff">ğŸ˜© Tired</option>
                                <option value="hungry" data-type="debuff">ğŸ½ Hungry</option>
                                <option value="anxious" data-type="debuff">ğŸ˜° Anxious</option>
                                <option value="period" data-type="debuff">ğŸ©¸ Period</option>
                                <option value="brain-fog" data-type="debuff">ğŸŒ« Brain Fog</option>
                                <option value="overstimulated" data-type="debuff">âš¡ Overstimulated</option>
                                <option value="understimulated" data-type="debuff">ğŸ˜¶ Understimulated</option>
                                <option value="doom-scrolling" data-type="debuff">ğŸ“± Doom Scrolling</option>
                                <option value="paralysis" data-type="debuff">ğŸ§Š Action Paralysis</option>
                            </optgroup>
                        </select>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card action-card">
                    <h3 class="card-title">âš¡ Quick Actions</h3>
                    <div class="quick-actions">
                        <button class="action-btn transition-btn" data-action="draw-transition">ğŸ² Draw Transition Card</button>
                        <button class="action-btn supervisor-btn" data-action="supervisor-mode">ğŸ›¡ Activate Supervisor</button>
                        <button class="action-btn ai-btn" data-action="ai-check-in">ğŸ¤– AI Check-In</button>
                        <button class="action-btn log-btn" data-action="quick-log">ğŸ“ Quick Log</button>
                    </div>
                </div>

                <!-- Today's Summary -->
                <div class="card summary-card">
                    <h3 class="card-title">ğŸ“Š Today's Summary</h3>
                    <div class="summary-stats">
                        <div class="summary-item">
                            <span class="summary-num" id="tasks-done-today">0</span>
                            <span class="summary-label">Quests Done</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-num" id="habits-done-today">0</span>
                            <span class="summary-label">Cards Played</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-num" id="xp-earned-today">0</span>
                            <span class="summary-label">XP Earned</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-num" id="streak-count">0</span>
                            <span class="summary-label">Day Streak</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ==================== QUEST BOARD (Daily Tasks) ==================== -->
        <section class="page" id="page-tasks">
            <div class="page-header">
                <h1 class="page-title">âš” Quest Board</h1>
                <button class="btn-primary" id="add-task-btn">+ New Quest</button>
            </div>

            <!-- Task Tiers -->
            <div class="task-columns">
                <div class="task-column" data-tier="boss">
                    <div class="column-header boss-header">
                        <h3>ğŸ‘¹ Boss Quests</h3>
                        <span class="column-desc">Critical / High energy</span>
                    </div>
                    <div class="task-list" id="task-list-boss" data-tier="boss"></div>
                </div>
                <div class="task-column" data-tier="survival">
                    <div class="column-header survival-header">
                        <h3>ğŸ›¡ Survival Quests</h3>
                        <span class="column-desc">Essential daily tasks</span>
                    </div>
                    <div class="task-list" id="task-list-survival" data-tier="survival"></div>
                </div>
                <div class="task-column" data-tier="side">
                    <div class="column-header side-header">
                        <h3>ğŸ“¦ Side Quests</h3>
                        <span class="column-desc">Optional / Low energy</span>
                    </div>
                    <div class="task-list" id="task-list-side" data-tier="side"></div>
                </div>
            </div>

            <!-- Add Task Modal -->
            <div class="modal" id="task-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>New Quest</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="task-form">
                        <div class="form-group">
                            <label>Quest Name</label>
                            <input type="text" id="task-name" placeholder="What needs to be done?" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tier</label>
                                <select id="task-tier" class="rpg-select">
                                    <option value="boss">ğŸ‘¹ Boss (Critical)</option>
                                    <option value="survival">ğŸ›¡ Survival (Essential)</option>
                                    <option value="side" selected>ğŸ“¦ Side (Optional)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Energy Cost</label>
                                <select id="task-energy" class="rpg-select">
                                    <option value="1">âš¡ Low</option>
                                    <option value="2" selected>âš¡âš¡ Medium</option>
                                    <option value="3">âš¡âš¡âš¡ High</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>XP Reward</label>
                                <input type="number" id="task-xp" value="10" min="1" max="100">
                            </div>
                            <div class="form-group">
                                <label>Gold Reward</label>
                                <input type="number" id="task-gold" value="5" min="0" max="100">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea id="task-notes" placeholder="Any details..." rows="2"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="task-transition"> Also add as Transition Card
                            </label>
                        </div>
                        <button type="submit" class="btn-primary btn-full">Create Quest</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ==================== VAULT (Backlog / Someday) ==================== -->
        <section class="page" id="page-backlog">
            <div class="page-header">
                <h1 class="page-title">ğŸ“¦ The Vault</h1>
                <span class="page-subtitle">Things for "someday" â€” AI will remind you weekly</span>
                <button class="btn-primary" id="add-backlog-btn">+ Store Item</button>
            </div>

            <div class="backlog-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="action">ğŸ”§ Actions</button>
                <button class="filter-btn" data-filter="project">ğŸ“ Projects</button>
                <button class="filter-btn" data-filter="wishlist">â­ Wishlist</button>
                <button class="filter-btn" data-filter="media">ğŸ¬ Media</button>
            </div>

            <div class="backlog-list" id="backlog-list"></div>

            <!-- Add Backlog Modal -->
            <div class="modal" id="backlog-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>Store in Vault</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="backlog-form">
                        <div class="form-group">
                            <label>Item Name</label>
                            <input type="text" id="backlog-name" placeholder="What to remember for later?" required>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="backlog-category" class="rpg-select">
                                <option value="action">ğŸ”§ Action (e.g., assemble chair)</option>
                                <option value="project">ğŸ“ Project (e.g., write novel)</option>
                                <option value="wishlist">â­ Wishlist (e.g., buy something)</option>
                                <option value="media">ğŸ¬ Media (e.g., watch/read)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea id="backlog-notes" placeholder="Details..." rows="2"></textarea>
                        </div>
                        <button type="submit" class="btn-primary btn-full">Store Item</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ==================== WEEKLY PLAN ==================== -->
        <section class="page" id="page-weekly">
            <div class="page-header">
                <h1 class="page-title">ğŸ“œ Weekly Campaign</h1>
                <span class="page-subtitle" id="week-range"></span>
            </div>

            <div class="weekly-grid">
                <div class="weekly-section">
                    <div class="section-header main-quest-header">
                        <h3>âš” Main Quests</h3>
                        <span>Primary objectives this week</span>
                    </div>
                    <div class="weekly-list" id="weekly-main-list"></div>
                    <button class="btn-add-inline" id="add-weekly-main">+ Add Main Quest</button>
                </div>
                <div class="weekly-section">
                    <div class="section-header side-quest-header">
                        <h3>ğŸ“¦ Side Quests</h3>
                        <span>Bonus objectives / achievements</span>
                    </div>
                    <div class="weekly-list" id="weekly-side-list"></div>
                    <button class="btn-add-inline" id="add-weekly-side">+ Add Side Quest</button>
                </div>
            </div>

            <div class="weekly-review-section">
                <h3>ğŸ“‹ Weekly Review</h3>
                <textarea id="weekly-review" class="review-textarea" placeholder="End-of-week thoughts, wins, lessons learned..."></textarea>
                <button class="btn-primary" id="save-weekly-review">Save Review</button>
            </div>
        </section>

        <!-- ==================== HABIT CARDS ==================== -->
        <section class="page" id="page-habits">
            <div class="page-header">
                <h1 class="page-title">ğŸƒ Habit Card Deck</h1>
                <button class="btn-primary" id="add-habit-btn">+ New Card</button>
            </div>

            <div class="habit-tiers">
                <div class="habit-tier">
                    <h3 class="tier-label">âš” Main Habits</h3>
                    <div class="habit-cards" id="habit-cards-main"></div>
                </div>
                <div class="habit-tier">
                    <h3 class="tier-label">ğŸ›¡ Survival Habits</h3>
                    <div class="habit-cards" id="habit-cards-survival"></div>
                </div>
                <div class="habit-tier">
                    <h3 class="tier-label">ğŸ“¦ Light Habits</h3>
                    <div class="habit-cards" id="habit-cards-light"></div>
                </div>
            </div>

            <div class="combo-display" id="combo-display">
                <span class="combo-label">ğŸ”¥ Combo</span>
                <span class="combo-count" id="combo-count">0</span>
                <span class="combo-bonus" id="combo-bonus"></span>
            </div>

            <!-- Add Habit Modal -->
            <div class="modal" id="habit-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>New Habit Card</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="habit-form">
                        <div class="form-group">
                            <label>Habit Name</label>
                            <input type="text" id="habit-name" placeholder="e.g., Morning stretch" required>
                        </div>
                        <div class="form-group">
                            <label>Tier</label>
                            <select id="habit-tier" class="rpg-select">
                                <option value="main">âš” Main (Weekly focus)</option>
                                <option value="survival">ğŸ›¡ Survival (Daily basics)</option>
                                <option value="light" selected>ğŸ“¦ Light (Easy wins)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>XP per completion</label>
                            <input type="number" id="habit-xp" value="5" min="1" max="50">
                        </div>
                        <div class="form-group">
                            <label>Icon (emoji)</label>
                            <input type="text" id="habit-icon" value="âœ¨" maxlength="2">
                        </div>
                        <button type="submit" class="btn-primary btn-full">Create Card</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ==================== TRANSITION CARDS ==================== -->
        <section class="page" id="page-transition">
            <div class="page-header">
                <h1 class="page-title">ğŸ² Transition Cards</h1>
                <span class="page-subtitle">Stuck? Draw a card. Do the thing.</span>
            </div>

            <div class="transition-area">
                <div class="drawn-card-display" id="drawn-card-display">
                    <div class="card-back" id="card-back">
                        <span class="card-back-icon">?</span>
                        <span class="card-back-text">Draw a Card</span>
                    </div>
                    <div class="card-front hidden" id="card-front">
                        <span class="card-front-icon" id="card-front-icon">ğŸ¯</span>
                        <span class="card-front-text" id="card-front-text">...</span>
                        <button class="btn-small" id="complete-drawn-card">âœ“ Done!</button>
                        <button class="btn-small btn-ghost" id="redraw-card">â†» Redraw</button>
                    </div>
                </div>
                <button class="btn-primary btn-large draw-btn" id="draw-transition-btn">ğŸ² Draw Random Card</button>
            </div>

            <div class="transition-pool">
                <h3>Card Pool</h3>
                <div class="transition-cards-list" id="transition-cards-list"></div>
                <button class="btn-add-inline" id="add-transition-btn">+ Add Card</button>
            </div>

            <!-- Add Transition Modal -->
            <div class="modal" id="transition-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2>New Transition Card</h2>
                        <button class="modal-close">&times;</button>
                    </div>
                    <form id="transition-form">
                        <div class="form-group">
                            <label>Action</label>
                            <input type="text" id="transition-name" placeholder="e.g., Take out trash, Gaze into distance 1 min" required>
                        </div>
                        <div class="form-group">
                            <label>Icon</label>
                            <input type="text" id="transition-icon" value="ğŸ¯" maxlength="2">
                        </div>
                        <button type="submit" class="btn-primary btn-full">Add Card</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- ==================== SUPERVISOR MODE ==================== -->
        <section class="page" id="page-supervisor">
            <div class="page-header">
                <h1 class="page-title">ğŸ›¡ Supervisor Mode</h1>
                <span class="page-subtitle">Override engaged. Listen to the commands.</span>
            </div>

            <div class="supervisor-area">
                <div class="supervisor-status" id="supervisor-status">
                    <div class="supervisor-inactive">
                        <div class="supervisor-icon">ğŸ›¡</div>
                        <h2>Supervisor Mode is Off</h2>
                        <p>Activate when you're stuck, spiraling, or paralyzed.<br>The AI will take over and give you direct commands.</p>
                        <button class="btn-danger btn-large" id="activate-supervisor">âš¡ ACTIVATE SUPERVISOR</button>
                    </div>
                </div>

                <div class="supervisor-active hidden" id="supervisor-active">
                    <div class="command-display" id="command-display">
                        <div class="command-text" id="command-text">Stop thinking.</div>
                        <div class="command-sub" id="command-sub">Stand up.</div>
                    </div>
                    <div class="supervisor-controls">
                        <button class="btn-large btn-success" id="command-done">âœ“ DONE</button>
                        <button class="btn-large btn-ghost" id="command-skip">SKIP</button>
                        <button class="btn-danger" id="deactivate-supervisor">âœ• Deactivate</button>
                    </div>
                    <div class="command-queue" id="command-queue"></div>
                </div>
            </div>
        </section>

        <!-- ==================== CAMPFIRE LOG (Records) ==================== -->
        <section class="page" id="page-records">
            <div class="page-header">
                <h1 class="page-title">ğŸ”¥ Campfire Log</h1>
                <span class="page-subtitle">Rest, record, reflect.</span>
            </div>

            <div class="records-tabs">
                <button class="tab-btn active" data-tab="daily-log">ğŸ“ Daily Log</button>
                <button class="tab-btn" data-tab="sleep-log">ğŸ˜´ Sleep</button>
                <button class="tab-btn" data-tab="diet-log">ğŸ½ Diet</button>
                <button class="tab-btn" data-tab="meds-log">ğŸ’Š Meds</button>
                <button class="tab-btn" data-tab="journal">ğŸ“– Journal</button>
                <button class="tab-btn" data-tab="history">ğŸ“œ History</button>
            </div>

            <!-- Daily Log Tab -->
            <div class="tab-content active" id="tab-daily-log">
                <div class="log-form">
                    <div class="form-group">
                        <label>Today's Recap</label>
                        <textarea id="daily-recap" rows="4" placeholder="What happened today? Just dump it here â€” AI can sort it later."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Weight (kg)</label>
                            <input type="number" id="log-weight" step="0.1" placeholder="--">
                        </div>
                        <div class="form-group">
                            <label>Pain Points</label>
                            <input type="text" id="log-pain" placeholder="e.g., headache, back pain">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Upload Photo / Screenshot</label>
                        <div class="upload-area" id="upload-area">
                            <span>ğŸ“· Click or drag to upload</span>
                            <input type="file" id="log-photo" accept="image/*" multiple>
                        </div>
                        <div class="uploaded-previews" id="uploaded-previews"></div>
                    </div>
                    <button class="btn-primary" id="save-daily-log">Save Log Entry</button>
                </div>
            </div>

            <!-- Sleep Log Tab -->
            <div class="tab-content" id="tab-sleep-log">
                <div class="log-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Bedtime</label>
                            <input type="time" id="log-bedtime">
                        </div>
                        <div class="form-group">
                            <label>Wake Time</label>
                            <input type="time" id="log-waketime">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Sleep Quality</label>
                        <div class="quality-picker" id="sleep-quality">
                            <button class="quality-btn" data-val="1">ğŸ˜«</button>
                            <button class="quality-btn" data-val="2">ğŸ˜´</button>
                            <button class="quality-btn" data-val="3">ğŸ˜</button>
                            <button class="quality-btn" data-val="4">ğŸ˜Š</button>
                            <button class="quality-btn" data-val="5">ğŸ˜„</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <textarea id="sleep-notes" rows="2" placeholder="Dreams, interruptions, etc."></textarea>
                    </div>
                    <button class="btn-primary" id="save-sleep-log">Save Sleep Log</button>
                </div>
            </div>

            <!-- Diet Log Tab -->
            <div class="tab-content" id="tab-diet-log">
                <div class="log-form">
                    <div class="meal-entries" id="meal-entries">
                        <div class="meal-entry">
                            <select class="rpg-select meal-type">
                                <option value="breakfast">ğŸŒ… Breakfast</option>
                                <option value="lunch">â˜€ Lunch</option>
                                <option value="dinner">ğŸŒ™ Dinner</option>
                                <option value="snack">ğŸ¿ Snack</option>
                            </select>
                            <input type="text" class="meal-desc" placeholder="What did you eat?">
                        </div>
                    </div>
                    <button class="btn-add-inline" id="add-meal">+ Add Meal</button>
                    <div class="form-group" style="margin-top: 1rem">
                        <label>Water Intake</label>
                        <div class="water-tracker" id="water-tracker">
                            <button class="water-btn" data-cup="1">ğŸ’§</button>
                            <button class="water-btn" data-cup="2">ğŸ’§</button>
                            <button class="water-btn" data-cup="3">ğŸ’§</button>
                            <button class="water-btn" data-cup="4">ğŸ’§</button>
                            <button class="water-btn" data-cup="5">ğŸ’§</button>
                            <button class="water-btn" data-cup="6">ğŸ’§</button>
                            <button class="water-btn" data-cup="7">ğŸ’§</button>
                            <button class="water-btn" data-cup="8">ğŸ’§</button>
                        </div>
                    </div>
                    <button class="btn-primary" id="save-diet-log">Save Diet Log</button>
                </div>
            </div>

            <!-- Meds Log Tab -->
            <div class="tab-content" id="tab-meds-log">
                <div class="log-form">
                    <div class="meds-list" id="meds-checklist"></div>
                    <div class="form-group">
                        <label>Add Medication</label>
                        <div class="form-row">
                            <input type="text" id="new-med-name" placeholder="Medication name">
                            <input type="text" id="new-med-time" placeholder="Time (e.g., morning)">
                            <button class="btn-small" id="add-med-btn">+</button>
                        </div>
                    </div>
                    <button class="btn-primary" id="save-meds-log">Save Meds Log</button>
                </div>
            </div>

            <!-- Journal Tab -->
            <div class="tab-content" id="tab-journal">
                <div class="log-form">
                    <textarea id="journal-entry" rows="10" placeholder="Free write. No rules. Just write."></textarea>
                    <button class="btn-primary" id="save-journal">Save Journal Entry</button>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="tab-history">
                <div class="history-list" id="history-list">
                    <p class="empty-state">Previous log entries will appear here.</p>
                </div>
            </div>
        </section>

        <!-- ==================== SHOP & RPG ==================== -->
        <section class="page" id="page-shop">
            <div class="page-header">
                <h1 class="page-title">ğŸª Adventurer's Guild</h1>
            </div>

            <div class="shop-layout">
                <!-- Character Panel -->
                <div class="card character-panel">
                    <div class="character-display">
                        <div class="character-avatar" id="character-avatar">ğŸ§™</div>
                        <div class="character-info">
                            <h3 id="char-name">Wanderer</h3>
                            <span id="char-class">Ranger</span>
                            <div class="char-level">Level <span id="char-level">1</span></div>
                            <div class="char-xp-bar">
                                <div class="bar-track"><div class="bar-fill" id="char-xp-fill"></div></div>
                                <span id="char-xp-label">0 / 100 XP</span>
                            </div>
                        </div>
                    </div>
                    <div class="equipped-items" id="equipped-items">
                        <h4>Equipped</h4>
                        <div class="equip-slots">
                            <div class="equip-slot" data-slot="weapon">
                                <span class="slot-label">Weapon</span>
                                <span class="slot-item" id="slot-weapon">ğŸ—¡ Starter Blade</span>
                            </div>
                            <div class="equip-slot" data-slot="armor">
                                <span class="slot-label">Armor</span>
                                <span class="slot-item" id="slot-armor">ğŸ‘˜ Worn Cloak</span>
                            </div>
                            <div class="equip-slot" data-slot="accessory">
                                <span class="slot-label">Accessory</span>
                                <span class="slot-item" id="slot-accessory">ğŸ“¿ Lucky Charm</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Shop Items -->
                <div class="card shop-panel">
                    <h3>ğŸ›’ Shop</h3>
                    <div class="shop-items" id="shop-items"></div>
                </div>

                <!-- Inventory -->
                <div class="card inventory-panel">
                    <h3>ğŸ’ Inventory</h3>
                    <div class="inventory-grid" id="inventory-grid"></div>
                </div>

                <!-- Adventure Log -->
                <div class="card adventure-panel">
                    <h3>ğŸ“– Adventure Log</h3>
                    <div class="adventure-log" id="adventure-log">
                        <div class="log-entry">
                            <span class="log-time">Dawn</span>
                            <span class="log-text">A new day begins. The wanderer awakens...</span>
                        </div>
                    </div>
                </div>

                <!-- Achievements -->
                <div class="card achievements-panel">
                    <h3>ğŸ† Achievements</h3>
                    <div class="achievements-grid" id="achievements-grid"></div>
                </div>
            </div>
        </section>

        <!-- ==================== AI COMPANION ==================== -->
        <section class="page" id="page-ai">
            <div class="page-header">
                <h1 class="page-title">ğŸ¤– AI Companion</h1>
                <span class="page-subtitle">Your party member. Talk, ask, or just vent.</span>
            </div>

            <div class="ai-chat-area">
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-msg ai">
                        <div class="chat-avatar">ğŸ¤–</div>
                        <div class="chat-bubble">
                            <p>Hey, adventurer. I'm your AI companion. Tell me what's going on â€” I can help sort tasks, check your status, fill in logs, or just listen. What's up?</p>
                        </div>
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="chat-tools">
                        <button class="chat-tool-btn" id="voice-input-btn" title="Voice input">ğŸ¤</button>
                        <button class="chat-tool-btn" id="image-upload-btn" title="Upload image">ğŸ“·</button>
                        <input type="file" id="ai-image-input" accept="image/*" hidden>
                    </div>
                    <textarea id="chat-input" placeholder="Tell me what's happening..." rows="1"></textarea>
                    <button class="btn-primary chat-send" id="chat-send">Send</button>
                </div>
                <div class="ai-quick-prompts">
                    <button class="quick-prompt" data-prompt="status">ğŸ“Š Check my status</button>
                    <button class="quick-prompt" data-prompt="suggest">ğŸ¯ What should I do now?</button>
                    <button class="quick-prompt" data-prompt="review">ğŸ“ Generate daily review</button>
                    <button class="quick-prompt" data-prompt="comfort">ğŸ’† I need comfort</button>
                    <button class="quick-prompt" data-prompt="vault">ğŸ“¦ Pick from vault</button>
                </div>
            </div>
        </section>

    </main>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>âš™ Settings</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="settings-form">
                <div class="form-group">
                    <label>Character Name</label>
                    <input type="text" id="setting-name" placeholder="Your adventurer name">
                </div>
                <div class="form-group">
                    <label>Class</label>
                    <select id="setting-class" class="rpg-select">
                        <option value="ranger">ğŸ¹ Ranger</option>
                        <option value="mage">ğŸ§™ Mage</option>
                        <option value="warrior">âš” Warrior</option>
                        <option value="rogue">ğŸ—¡ Rogue</option>
                        <option value="healer">ğŸ’š Healer</option>
                        <option value="bard">ğŸµ Bard</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>AI API Key (OpenAI compatible)</label>
                    <input type="password" id="setting-api-key" placeholder="sk-...">
                    <small>Stored locally. Never sent anywhere except the AI API.</small>
                </div>
                <div class="form-group">
                    <label>AI API Endpoint</label>
                    <input type="text" id="setting-api-url" placeholder="https://api.openai.com/v1/chat/completions">
                </div>
                <div class="form-group">
                    <label>AI Model</label>
                    <input type="text" id="setting-model" placeholder="gpt-4o-mini" value="gpt-4o-mini">
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="setting-sound"> Enable sound effects
                    </label>
                </div>
                <div class="form-group">
                    <label>Export / Import Data</label>
                    <div class="form-row">
                        <button class="btn-primary" id="export-data">ğŸ“¤ Export All Data</button>
                        <button class="btn-primary" id="import-data">ğŸ“¥ Import Data</button>
                        <input type="file" id="import-file" accept=".json" hidden>
                    </div>
                </div>
                <div class="form-group">
                    <button class="btn-danger" id="reset-all">âš  Reset All Data</button>
                </div>
                <button class="btn-primary btn-full" id="save-settings">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script src="js/store.js"></script>
    <script src="js/particles.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/tasks.js"></script>
    <script src="js/backlog.js"></script>
    <script src="js/weekly.js"></script>
    <script src="js/habits.js"></script>
    <script src="js/transition.js"></script>
    <script src="js/supervisor.js"></script>
    <script src="js/records.js"></script>
    <script src="js/shop.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
